# Claude Code Session Hooks

A collection of Claude Code hooks that track your coding sessions, log activity, and generate session summaries.

## What It Does

These hooks work together to:

- **Track all tool usage** during a session (edits, writes, commands, tasks)
- **Log activity** to `.claude/activity.jsonl` for analysis
- **Update live progress** every 5 meaningful actions
- **Generate session summaries** when you stop Claude Code
- **Record milestones** with `/milestone <description>` commands
- **Create handoff documents** for session continuity

## Hooks

| Hook | Event | Purpose |
|------|-------|---------|
| `track-activity.py` | PostToolUse | Logs every tool call to activity.jsonl |
| `milestone.py` | UserPromptSubmit | Handles `/milestone`, `/status`, `/handoff` commands |
| `update-status.py` | Stop | Generates session summary, updates STATUS.md |

## Installation

1. Clone this repo or copy the files to a location of your choice:

```bash
git clone https://github.com/adampaulwalker/claude-session-hooks.git ~/claude-hooks
```

2. Add the hooks to your `~/.claude/settings.json`:

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ~/claude-hooks/track-activity.py"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ~/claude-hooks/milestone.py"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ~/claude-hooks/update-status.py"
          }
        ]
      }
    ]
  }
}
```

3. Make the scripts executable:

```bash
chmod +x ~/claude-hooks/*.py
```

## Usage

### Automatic Tracking

Once installed, the hooks automatically:

- Log every tool use to `.claude/activity.jsonl`
- Update `.claude/LIVE-PROGRESS.md` every 5 meaningful actions
- Generate `.claude/STATUS.md` when you exit Claude Code

### Commands

Type these in your Claude Code prompt:

- `/milestone Completed feature X` - Record a milestone
- `/status` - Show current session stats
- `/handoff` - Generate a handoff document for the next session

### Generated Files

All files are created in the project's `.claude/` directory:

| File | Description |
|------|-------------|
| `activity.jsonl` | Raw activity log (JSON lines) |
| `LIVE-PROGRESS.md` | Real-time progress (updates during session) |
| `STATUS.md` | Session history and summaries |
| `HANDOFF.md` | Handoff document for session continuity |
| `logs/` | Archived daily activity logs |

## Example Output

### STATUS.md

```markdown
# Project Status

*Auto-generated by Claude Code hooks. Last updated: 2025-01-26 16:30*

## Session History

### 2025-01-26 (14:22:30 - 16:28:45)
- **Actions:** 47 (Edits: 23, Writes: 5, Commands: 12, Tasks: 7)
- **Files:** src/main.py, src/utils.py, tests/test_main.py (+2 more)
  - Tasks: Implement login, Add tests, Fix bug #42
  - Milestones: Auth system complete, Tests passing
```

## Requirements

- Python 3.7+
- Claude Code CLI

## License

MIT
